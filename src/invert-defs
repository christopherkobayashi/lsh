#! /bin/sh

# Reads ssh.h on stdin, and outputs an array which maps packet numbers
# to names.

echo "/* Automatically generated by invert-defs `date`."
echo " * Do not edit. */"
echo
echo "{"

sed -e 's/^#define \(SSH_MSG_[A-Z_0-9][A-Z_0-9]*\)[ \t][ \t]*\([1-9][0-9]*\)[ \t]*$/\2 \1/' -e t -e d \
   | sort -n \
   | awk 'BEGIN{i=0;}
          { for(j=$1;i<j;i++) print "\"Unknown\"," ;
		print "\"" $2 "\""; i++;}
	  END{for(;i<256;i++) print "\"Unknown\",";}'

echo "}\n"

